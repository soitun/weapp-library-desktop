{"version":3,"sources":["webpack:///3.js","webpack:///./src/components/Login.vue","webpack:///Login.vue","webpack:///./src/components/Login.vue?c26f","webpack:///./src/components/Login.vue?2221","webpack:///./src/components/Login.vue?2c29"],"names":["webpackJsonp","116","module","exports","__webpack_require__","Component","132","__webpack_exports__","Object","defineProperty","value","data","_this","this","loginForm","phone","password","loginRules","required","message","trigger","registerForm","manager","managerPhone","confirmPassword","name","address","telephone","description","registerRules","validator","rule","callback","$refs","validateField","Error","dialogFormVisible","loginLoading","registerLoading","methods","submitForm","formName","self","validate","valid","console","log","$axios","get","params","then","res","localStorage","setItem","id","$router","push","$message","error","catch","_","location","admin_name","admin_phone","admin_password","post","165","undefined","i","174","render","_vm","_h","$createElement","_c","_self","staticClass","_v","ref","attrs","model","rules","label-width","prop","placeholder","$$v","expression","type","nativeOn","keyup","$event","_k","keyCode","loading","on","click","title","visible","update:visible","label-position","label","auto-complete","slot","staticRenderFns","179","content","locals"],"mappings":"AAAAA,cAAc,IAERC,IACA,SAAUC,EAAQC,EAASC,GCDjCA,EAAA,IAEA,IAAAC,GAAAD,EAAA,IAEAA,EAAA,KAEAA,EAAA,KAEA,kBAEA,KAGAF,GAAAC,QAAAE,EAAAF,SDUMG,IACA,SAAUJ,EAAQK,EAAqBH,GAE7C,YACAI,QAAOC,eAAeF,EAAqB,cAAgBG,OAAO,IEyBlEH,EAAA,SF+BII,KAAM,WE7BV,GAAAC,GAAAC,IFgCQ,QACIC,WACIC,ME/BhB,GFgCgBC,SE9BhB,IFgCYC,YACIF,QACIG,UE/BpB,EFgCoBC,QE/BpB,SFgCoBC,QE9BpB,SFgCgBJ,WACIE,UE/BpB,EFgCoBC,QE/BpB,QFgCoBC,QE7BpB,UFgCYC,cACIC,QE/BhB,GFgCgBC,aE/BhB,GFgCgBP,SE/BhB,GFgCgBQ,gBE/BhB,GFgCgBC,KE/BhB,GFgCgBC,QE/BhB,GFgCgBC,UE/BhB,GFgCgBC,YE9BhB,IFgCYC,eACIP,UACIJ,UE/BpB,EFgCoBC,QE/BpB,WFgCoBC,QE9BpB,SFgCgBG,eACIL,UE/BpB,EFgCoBC,QE/BpB,YFgCoBC,QE9BpB,SFgCgBJ,WACIE,UE/BpB,EFgCoBC,QE/BpB,QFgCoBC,QE/BpB,SFiCoBU,UAAW,SAAmBC,EAAMrB,EAAOsB,GACI,KAAvCpB,EAAMS,aAAaG,iBACnBZ,EAAMqB,MAAMZ,aAAaa,cE/BrD,mBAEAF,OFkCgBR,kBACIN,UE/BpB,EFgCoBC,QE/BpB,UFgCoBC,QE/BpB,SFiCoBU,UAAW,SAAmBC,EAAMrB,EAAOsB,GACnCtB,IAAUE,EAAMS,aAAaL,SAC7BgB,EAAS,GAAIG,OE/BzC,eAEAH,OFmCgBP,OACIP,UE/BpB,EFgCoBC,QE/BpB,WFgCoBC,QE9BpB,SFgCgBM,UACIR,UE/BpB,EFgCoBC,QE/BpB,WFgCoBC,QE9BpB,SFgCgBL,QACIG,UE/BpB,EFgCoBC,QE/BpB,WFgCoBC,QE9BpB,SFgCgBQ,cACIV,UE/BpB,EFgCoBC,QE/BpB,WFgCoBC,QE7BpB,UFgCYgB,mBE/BZ,EFgCYC,cE/BZ,EFgCYC,iBE9BZ,IFiCIC,SACIC,WAAY,SAAoBC,GAC5B,GA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","file":"3.js?1229fa779bc9ec8c534a","sourcesContent":["webpackJsonp([3],{\n\n/***/ 116:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(179)\n\nvar Component = __webpack_require__(38)(\n  /* script */\n  __webpack_require__(132),\n  /* template */\n  __webpack_require__(174),\n  /* scopeId */\n  \"data-v-cb0261fc\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 132:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    data: function data() {\n        var _this = this;\n\n        return {\n            loginForm: {\n                phone: '',\n                password: ''\n            },\n            loginRules: {\n                phone: [{\n                    required: true,\n                    message: '请输入用户名',\n                    trigger: 'blur'\n                }],\n                password: [{\n                    required: true,\n                    message: '请输入密码',\n                    trigger: 'blur'\n                }]\n            },\n            registerForm: {\n                manager: '',\n                managerPhone: '',\n                password: '',\n                confirmPassword: '',\n                name: '',\n                address: '',\n                telephone: '',\n                description: ''\n            },\n            registerRules: {\n                manager: [{\n                    required: true,\n                    message: '请输入负责人姓名',\n                    trigger: 'blur'\n                }],\n                managerPhone: [{\n                    required: true,\n                    message: '请输入负责人手机号',\n                    trigger: 'blur'\n                }],\n                password: [{\n                    required: true,\n                    message: '请输入密码',\n                    trigger: 'blur'\n                }, {\n                    validator: function validator(rule, value, callback) {\n                        if (_this.registerForm.confirmPassword !== '') {\n                            _this.$refs.registerForm.validateField('confirmPassword');\n                        }\n                        callback();\n                    }\n                }],\n                confirmPassword: [{\n                    required: true,\n                    message: '请再次输入密码',\n                    trigger: 'blur'\n                }, {\n                    validator: function validator(rule, value, callback) {\n                        if (value !== _this.registerForm.password) {\n                            callback(new Error('两次输入密码不一致!'));\n                        } else {\n                            callback();\n                        }\n                    }\n                }],\n                name: [{\n                    required: true,\n                    message: '请输入图书馆名称',\n                    trigger: 'blur'\n                }],\n                address: [{\n                    required: true,\n                    message: '请输入图书馆地址',\n                    trigger: 'blur'\n                }],\n                phone: [{\n                    required: true,\n                    message: '请输入图书馆电话',\n                    trigger: 'blur'\n                }],\n                description: [{\n                    required: true,\n                    message: '请输入图书馆描述',\n                    trigger: 'blur'\n                }]\n            },\n            dialogFormVisible: false,\n            loginLoading: false,\n            registerLoading: false\n        };\n    },\n    methods: {\n        submitForm: function submitForm(formName) {\n            var self = this;\n            self.$refs[formName].validate(function (valid) {\n                if (valid) {\n                    if (formName == 'loginForm') {\n                        self.loginLoading = true;\n                        self.$axios.get(\"/api/libraries/login\", {\n                            params: self.loginForm\n                        }).then(function (res) {\n                            self.loginLoading = false;\n                            if (!res.data.data) {\n                                self.$message.error(\"用户名或密码错误\");\n                            } else {\n                                localStorage.setItem('username', self.loginForm.phone);\n                                localStorage.setItem('libraryId', res.data.data.id);\n                                self.$router.push('/home');\n                            }\n                        }).catch(function (_) {\n                            self.loginLoading = false;\n                            self.$message.error(\"服务器错误\");\n                        });\n                    } else if (formName == 'registerForm') {\n                        self.registerLoading = true;\n                        var params = {\n                            name: self.registerForm.name,\n                            phone: self.registerForm.phone,\n                            location: self.registerForm.address,\n                            description: self.registerForm.description,\n                            admin_name: self.registerForm.manager,\n                            admin_phone: self.registerForm.managerPhone,\n                            admin_password: self.registerForm.password\n                        };\n                        self.$axios.post(\"/api/libraries\", params).then(function (res) {\n                            self.registerLoading = false;\n                            if (res.data.data) {\n                                self.dialogFormVisible = false;\n                                self.$message(\"注册成功\");\n                            } else {\n                                self.$message.error(\"注册失败\");\n                            }\n                        }).catch(function (_) {\n                            self.loginLoading = false;\n                            self.$message.error(\"服务器错误\");\n                        });\n                    }\n                } else {\n                    console.log('error submit!!');\n                    return false;\n                }\n            });\n        }\n    }\n});\n\n/***/ }),\n\n/***/ 165:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(10)(undefined);\n// imports\n\n\n// module\nexports.push([module.i, \".login-wrap[data-v-cb0261fc]{position:relative;width:100%;height:100%;background:#324157}.ms-title[data-v-cb0261fc]{position:absolute;top:50%;width:100%;margin-top:-230px;text-align:center;font-size:30px;color:#fff}.ms-login[data-v-cb0261fc]{position:absolute;left:50%;top:50%;width:300px;height:160px;margin:-150px 0 0 -190px;padding:40px;border-radius:5px;background:#fff}.login-btn[data-v-cb0261fc]{text-align:center}.login-btn button[data-v-cb0261fc]{width:100%;height:36px}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 174:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"login-wrap\"\n  }, [_c('div', {\n    staticClass: \"ms-title\"\n  }, [_vm._v(\"图书馆后台管理系统\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"ms-login\"\n  }, [_c('el-form', {\n    ref: \"loginForm\",\n    attrs: {\n      \"model\": _vm.loginForm,\n      \"rules\": _vm.loginRules,\n      \"label-width\": \"0px\"\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"prop\": \"phone\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"placeholder\": \"手机号\"\n    },\n    model: {\n      value: (_vm.loginForm.phone),\n      callback: function($$v) {\n        _vm.loginForm.phone = $$v\n      },\n      expression: \"loginForm.phone\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"prop\": \"password\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"type\": \"password\",\n      \"placeholder\": \"密码\"\n    },\n    nativeOn: {\n      \"keyup\": function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"enter\", 13)) { return null; }\n        _vm.submitForm('loginForm')\n      }\n    },\n    model: {\n      value: (_vm.loginForm.password),\n      callback: function($$v) {\n        _vm.loginForm.password = $$v\n      },\n      expression: \"loginForm.password\"\n    }\n  })], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"login-btn\"\n  }, [_c('el-button', {\n    attrs: {\n      \"type\": \"primary\",\n      \"loading\": _vm.loginLoading\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.submitForm('loginForm')\n      }\n    }\n  }, [_vm._v(\"登录\")])], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"login-btn\"\n  }, [_c('el-button', {\n    attrs: {\n      \"type\": \"text\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.dialogFormVisible = true\n      }\n    }\n  }, [_vm._v(\"注册\")])], 1)], 1)], 1), _vm._v(\" \"), _c('el-dialog', {\n    attrs: {\n      \"title\": \"注册\",\n      \"visible\": _vm.dialogFormVisible\n    },\n    on: {\n      \"update:visible\": function($event) {\n        _vm.dialogFormVisible = $event\n      }\n    }\n  }, [_c('el-form', {\n    ref: \"registerForm\",\n    attrs: {\n      \"rules\": _vm.registerRules,\n      \"label-width\": \"120px\",\n      \"label-position\": \"left\",\n      \"model\": _vm.registerForm\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": \"负责人手机号\",\n      \"prop\": \"managerPhone\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"placeholder\": \"负责人手机号将作为登录账号\"\n    },\n    model: {\n      value: (_vm.registerForm.managerPhone),\n      callback: function($$v) {\n        _vm.registerForm.managerPhone = $$v\n      },\n      expression: \"registerForm.managerPhone\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"负责人姓名\",\n      \"prop\": \"manager\"\n    }\n  }, [_c('el-input', {\n    model: {\n      value: (_vm.registerForm.manager),\n      callback: function($$v) {\n        _vm.registerForm.manager = $$v\n      },\n      expression: \"registerForm.manager\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"密码\",\n      \"prop\": \"password\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"type\": \"password\",\n      \"auto-complete\": \"off\"\n    },\n    model: {\n      value: (_vm.registerForm.password),\n      callback: function($$v) {\n        _vm.registerForm.password = $$v\n      },\n      expression: \"registerForm.password\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"确认密码\",\n      \"prop\": \"confirmPassword\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"type\": \"password\",\n      \"auto-complete\": \"off\"\n    },\n    model: {\n      value: (_vm.registerForm.confirmPassword),\n      callback: function($$v) {\n        _vm.registerForm.confirmPassword = $$v\n      },\n      expression: \"registerForm.confirmPassword\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"图书馆名称\",\n      \"prop\": \"name\"\n    }\n  }, [_c('el-input', {\n    model: {\n      value: (_vm.registerForm.name),\n      callback: function($$v) {\n        _vm.registerForm.name = $$v\n      },\n      expression: \"registerForm.name\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"图书馆地址\",\n      \"prop\": \"address\"\n    }\n  }, [_c('el-input', {\n    model: {\n      value: (_vm.registerForm.address),\n      callback: function($$v) {\n        _vm.registerForm.address = $$v\n      },\n      expression: \"registerForm.address\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"图书馆电话\",\n      \"prop\": \"phone\"\n    }\n  }, [_c('el-input', {\n    model: {\n      value: (_vm.registerForm.phone),\n      callback: function($$v) {\n        _vm.registerForm.phone = $$v\n      },\n      expression: \"registerForm.phone\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"图书馆描述\",\n      \"prop\": \"description\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"type\": \"textarea\"\n    },\n    model: {\n      value: (_vm.registerForm.description),\n      callback: function($$v) {\n        _vm.registerForm.description = $$v\n      },\n      expression: \"registerForm.description\"\n    }\n  })], 1)], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"dialog-footer\",\n    slot: \"footer\"\n  }, [_c('el-button', {\n    on: {\n      \"click\": function($event) {\n        _vm.dialogFormVisible = false\n      }\n    }\n  }, [_vm._v(\"取 消\")]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"primary\",\n      \"loading\": _vm.registerLoading\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.submitForm('registerForm')\n      }\n    }\n  }, [_vm._v(\"确 定\")])], 1)], 1)], 1)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 179:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(165);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(39)(\"e9336ae2\", content, true);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 3.js?1229fa779bc9ec8c534a","\n/* styles */\nrequire(\"!!vue-style-loader!css-loader?minimize!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-cb0261fc\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Login.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Login.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-cb0261fc\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Login.vue\"),\n  /* scopeId */\n  \"data-v-cb0261fc\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Login.vue\n// module id = 116\n// module chunks = 3","<template>\n    <div class=\"login-wrap\">\n        <div class=\"ms-title\">图书馆后台管理系统</div>\n        <div class=\"ms-login\">\n            <el-form :model=\"loginForm\" :rules=\"loginRules\" ref=\"loginForm\" label-width=\"0px\">\n                <el-form-item prop=\"phone\">\n                    <el-input v-model=\"loginForm.phone\" placeholder=\"手机号\"></el-input>\n                </el-form-item>\n                <el-form-item prop=\"password\">\n                    <el-input type=\"password\" placeholder=\"密码\" v-model=\"loginForm.password\" @keyup.enter.native=\"submitForm('loginForm')\"></el-input>\n                </el-form-item>\n                <div class=\"login-btn\">\n                    <el-button type=\"primary\" :loading=\"loginLoading\" @click=\"submitForm('loginForm')\">登录</el-button>\n                </div>\n                <div class=\"login-btn\">\n                    <el-button type=\"text\" @click=\"dialogFormVisible=true\">注册</el-button>\n                </div>\n            </el-form>\n        </div>\n        <el-dialog title=\"注册\" :visible.sync=\"dialogFormVisible\">\n            <el-form :rules=\"registerRules\" label-width=\"120px\" label-position=\"left\" :model=\"registerForm\" ref=\"registerForm\">\n                <el-form-item label=\"负责人手机号\" prop=\"managerPhone\">\n                    <el-input placeholder=\"负责人手机号将作为登录账号\" v-model=\"registerForm.managerPhone\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"负责人姓名\" prop=\"manager\">\n                    <el-input v-model=\"registerForm.manager\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"密码\" prop=\"password\">\n                    <el-input type=\"password\" v-model=\"registerForm.password\" auto-complete=\"off\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"确认密码\" prop=\"confirmPassword\">\n                    <el-input type=\"password\" v-model=\"registerForm.confirmPassword\" auto-complete=\"off\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"图书馆名称\" prop=\"name\">\n                    <el-input v-model=\"registerForm.name\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"图书馆地址\" prop=\"address\">\n                    <el-input v-model=\"registerForm.address\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"图书馆电话\" prop=\"phone\">\n                    <el-input v-model=\"registerForm.phone\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"图书馆描述\" prop=\"description\">\n                    <el-input type=\"textarea\" v-model=\"registerForm.description\"></el-input>\n                </el-form-item>\n            </el-form>\n            <div slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n                <el-button type=\"primary\" :loading=\"registerLoading\" @click=\"submitForm('registerForm')\">确 定</el-button>\n            </div>\n        </el-dialog>\n    </div>\n</template>\n<script>\nexport default {\n    data: function() {\n        return {\n            loginForm: {\n                phone: '',\n                password: ''\n            },\n            loginRules: {\n                phone: [{\n                    required: true,\n                    message: '请输入用户名',\n                    trigger: 'blur'\n                }],\n                password: [{\n                    required: true,\n                    message: '请输入密码',\n                    trigger: 'blur'\n                }]\n            },\n            registerForm: {\n                manager: '',\n                managerPhone: '',\n                password: '',\n                confirmPassword: '',\n                name: '',\n                address: '',\n                telephone: '',\n                description: ''\n            },\n            registerRules: {\n                manager: [{\n                    required: true,\n                    message: '请输入负责人姓名',\n                    trigger: 'blur'\n                }],\n                managerPhone: [{\n                    required: true,\n                    message: '请输入负责人手机号',\n                    trigger: 'blur'\n                }],\n                password: [{\n                    required: true,\n                    message: '请输入密码',\n                    trigger: 'blur'\n                }, {\n                    validator: (rule, value, callback) => {\n                        if (this.registerForm.confirmPassword !== '') {\n                            this.$refs.registerForm.validateField('confirmPassword');\n                        }\n                        callback();\n                    }\n                }],\n                confirmPassword: [{\n                    required: true,\n                    message: '请再次输入密码',\n                    trigger: 'blur'\n                }, {\n                    validator: (rule, value, callback) => {\n                        if (value !== this.registerForm.password) {\n                            callback(new Error('两次输入密码不一致!'));\n                        } else {\n                            callback();\n                        }\n                    }\n                }],\n                name: [{\n                    required: true,\n                    message: '请输入图书馆名称',\n                    trigger: 'blur'\n                }],\n                address: [{\n                    required: true,\n                    message: '请输入图书馆地址',\n                    trigger: 'blur'\n                }],\n                phone: [{\n                    required: true,\n                    message: '请输入图书馆电话',\n                    trigger: 'blur'\n                }],\n                description: [{\n                    required: true,\n                    message: '请输入图书馆描述',\n                    trigger: 'blur'\n                }]\n            },\n            dialogFormVisible: false,\n            loginLoading: false,\n            registerLoading: false\n        }\n    },\n    methods: {\n        submitForm(formName) {\n            const self = this;\n            self.$refs[formName].validate((valid) => {\n                if (valid) {\n                    if (formName == 'loginForm') {\n                        self.loginLoading = true;\n                        self.$axios.get(\"/api/libraries/login\", {\n                            params: self.loginForm\n                        }).then((res) => {\n                            self.loginLoading = false;\n                            if (!res.data.data) {\n                                self.$message.error(\"用户名或密码错误\");\n                            } else {\n                                localStorage.setItem('username', self.loginForm.phone);\n                                localStorage.setItem('libraryId', res.data.data.id);\n                                self.$router.push('/home');\n                            }\n                        }).catch(_ => {\n                            self.loginLoading = false;\n                            self.$message.error(\"服务器错误\")\n                        })\n                    } else if (formName == 'registerForm') {\n                        self.registerLoading = true;\n                        let params = {\n                            name: self.registerForm.name,\n                            phone: self.registerForm.phone,\n                            location: self.registerForm.address,\n                            description: self.registerForm.description,\n                            admin_name: self.registerForm.manager,\n                            admin_phone: self.registerForm.managerPhone,\n                            admin_password: self.registerForm.password\n                        };\n                        self.$axios.post(\"/api/libraries\", params).then(res => {\n                            self.registerLoading = false;\n                            if (res.data.data) {\n                                self.dialogFormVisible = false;\n                                self.$message(\"注册成功\");\n                            } else {\n                                self.$message.error(\"注册失败\");\n                            }\n                        }).catch(_ => {\n                            self.loginLoading = false;\n                            self.$message.error(\"服务器错误\")\n                        })\n                    }\n                } else {\n                    console.log('error submit!!');\n                    return false;\n                }\n            });\n        }\n    }\n}\n</script>\n<style scoped>\n.login-wrap {\n    position: relative;\n    width: 100%;\n    height: 100%;\n    background: #324157;\n}\n\n.ms-title {\n    position: absolute;\n    top: 50%;\n    width: 100%;\n    margin-top: -230px;\n    text-align: center;\n    font-size: 30px;\n    color: #fff;\n}\n\n.ms-login {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    width: 300px;\n    height: 160px;\n    margin: -150px 0 0 -190px;\n    padding: 40px;\n    border-radius: 5px;\n    background: #fff;\n}\n\n.login-btn {\n    text-align: center;\n}\n\n.login-btn button {\n    width: 100%;\n    height: 36px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// Login.vue?f21ca10e","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".login-wrap[data-v-cb0261fc]{position:relative;width:100%;height:100%;background:#324157}.ms-title[data-v-cb0261fc]{position:absolute;top:50%;width:100%;margin-top:-230px;text-align:center;font-size:30px;color:#fff}.ms-login[data-v-cb0261fc]{position:absolute;left:50%;top:50%;width:300px;height:160px;margin:-150px 0 0 -190px;padding:40px;border-radius:5px;background:#fff}.login-btn[data-v-cb0261fc]{text-align:center}.login-btn button[data-v-cb0261fc]{width:100%;height:36px}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?minimize!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-cb0261fc\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/Login.vue\n// module id = 165\n// module chunks = 3","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"login-wrap\"\n  }, [_c('div', {\n    staticClass: \"ms-title\"\n  }, [_vm._v(\"图书馆后台管理系统\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"ms-login\"\n  }, [_c('el-form', {\n    ref: \"loginForm\",\n    attrs: {\n      \"model\": _vm.loginForm,\n      \"rules\": _vm.loginRules,\n      \"label-width\": \"0px\"\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"prop\": \"phone\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"placeholder\": \"手机号\"\n    },\n    model: {\n      value: (_vm.loginForm.phone),\n      callback: function($$v) {\n        _vm.loginForm.phone = $$v\n      },\n      expression: \"loginForm.phone\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"prop\": \"password\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"type\": \"password\",\n      \"placeholder\": \"密码\"\n    },\n    nativeOn: {\n      \"keyup\": function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"enter\", 13)) { return null; }\n        _vm.submitForm('loginForm')\n      }\n    },\n    model: {\n      value: (_vm.loginForm.password),\n      callback: function($$v) {\n        _vm.loginForm.password = $$v\n      },\n      expression: \"loginForm.password\"\n    }\n  })], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"login-btn\"\n  }, [_c('el-button', {\n    attrs: {\n      \"type\": \"primary\",\n      \"loading\": _vm.loginLoading\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.submitForm('loginForm')\n      }\n    }\n  }, [_vm._v(\"登录\")])], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"login-btn\"\n  }, [_c('el-button', {\n    attrs: {\n      \"type\": \"text\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.dialogFormVisible = true\n      }\n    }\n  }, [_vm._v(\"注册\")])], 1)], 1)], 1), _vm._v(\" \"), _c('el-dialog', {\n    attrs: {\n      \"title\": \"注册\",\n      \"visible\": _vm.dialogFormVisible\n    },\n    on: {\n      \"update:visible\": function($event) {\n        _vm.dialogFormVisible = $event\n      }\n    }\n  }, [_c('el-form', {\n    ref: \"registerForm\",\n    attrs: {\n      \"rules\": _vm.registerRules,\n      \"label-width\": \"120px\",\n      \"label-position\": \"left\",\n      \"model\": _vm.registerForm\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": \"负责人手机号\",\n      \"prop\": \"managerPhone\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"placeholder\": \"负责人手机号将作为登录账号\"\n    },\n    model: {\n      value: (_vm.registerForm.managerPhone),\n      callback: function($$v) {\n        _vm.registerForm.managerPhone = $$v\n      },\n      expression: \"registerForm.managerPhone\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"负责人姓名\",\n      \"prop\": \"manager\"\n    }\n  }, [_c('el-input', {\n    model: {\n      value: (_vm.registerForm.manager),\n      callback: function($$v) {\n        _vm.registerForm.manager = $$v\n      },\n      expression: \"registerForm.manager\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"密码\",\n      \"prop\": \"password\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"type\": \"password\",\n      \"auto-complete\": \"off\"\n    },\n    model: {\n      value: (_vm.registerForm.password),\n      callback: function($$v) {\n        _vm.registerForm.password = $$v\n      },\n      expression: \"registerForm.password\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"确认密码\",\n      \"prop\": \"confirmPassword\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"type\": \"password\",\n      \"auto-complete\": \"off\"\n    },\n    model: {\n      value: (_vm.registerForm.confirmPassword),\n      callback: function($$v) {\n        _vm.registerForm.confirmPassword = $$v\n      },\n      expression: \"registerForm.confirmPassword\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"图书馆名称\",\n      \"prop\": \"name\"\n    }\n  }, [_c('el-input', {\n    model: {\n      value: (_vm.registerForm.name),\n      callback: function($$v) {\n        _vm.registerForm.name = $$v\n      },\n      expression: \"registerForm.name\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"图书馆地址\",\n      \"prop\": \"address\"\n    }\n  }, [_c('el-input', {\n    model: {\n      value: (_vm.registerForm.address),\n      callback: function($$v) {\n        _vm.registerForm.address = $$v\n      },\n      expression: \"registerForm.address\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"图书馆电话\",\n      \"prop\": \"phone\"\n    }\n  }, [_c('el-input', {\n    model: {\n      value: (_vm.registerForm.phone),\n      callback: function($$v) {\n        _vm.registerForm.phone = $$v\n      },\n      expression: \"registerForm.phone\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"图书馆描述\",\n      \"prop\": \"description\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"type\": \"textarea\"\n    },\n    model: {\n      value: (_vm.registerForm.description),\n      callback: function($$v) {\n        _vm.registerForm.description = $$v\n      },\n      expression: \"registerForm.description\"\n    }\n  })], 1)], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"dialog-footer\",\n    slot: \"footer\"\n  }, [_c('el-button', {\n    on: {\n      \"click\": function($event) {\n        _vm.dialogFormVisible = false\n      }\n    }\n  }, [_vm._v(\"取 消\")]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"primary\",\n      \"loading\": _vm.registerLoading\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.submitForm('registerForm')\n      }\n    }\n  }, [_vm._v(\"确 定\")])], 1)], 1)], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-cb0261fc\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/Login.vue\n// module id = 174\n// module chunks = 3","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js?minimize!../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-cb0261fc\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./Login.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"e9336ae2\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-style-loader!./~/css-loader?minimize!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-cb0261fc\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/Login.vue\n// module id = 179\n// module chunks = 3"],"sourceRoot":""}